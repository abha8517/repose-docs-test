<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>9.0.1.0 | Services | Metrics Service</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="/_stylesheets/asciibinder.css" >
  <link rel="stylesheet" href="/_stylesheets/repose.css" >
  <link rel="stylesheet" href="/_stylesheets/release-note-categories.css" >

   <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
   <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
   <!--[if lt IE 9]>
     <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
     <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
   <![endif]-->

  <link href="/_images/favicon32x32.png" rel="shortcut icon" type="text/css">
  <!--[if IE]><link rel="shortcut icon" href="/favicon.ico"><![endif]-->
  <meta content="AsciiBinder" name="application-name">
</head>
<body onload="selectVersion('9.0.1.0');">
  <div class="container">
    <p class="toggle-nav visible-xs pull-left">
      <button class="btn btn-default btn-sm" type="button" data-toggle="offcanvas">Toggle nav</button>
    </p>
    <ol class="breadcrumb">
      <li class="sitename">
        <a class="navbar-brand" href="http://www.openrepose.org/">
          <img alt="OpenRepose" src="/_images/repose-logo.png" align="bottom">
        </a>
      </li>
      <li class="sitename">
        <a href="../../index.html">
          Home
        </a>
      </li>
      <li class="hidden-xs active">
        <a href="/versions/9.0.1.0/welcome/index.html">
          Repose
        </a>
        <select id="version-selector" onchange="versionSelector(this);" w3-include-html="/_includes/versions.html">
        </select>
      </li>
      <li class="hidden-xs active">
        <a href="../services/index.html">Services</a>
      </li>
      
      <li class="hidden-xs active">
        Metrics Service
      </li>
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas">
        <a class="navbar-search" href="/versions/search.html">
          <span class="glyphicon glyphicon-search"/>
          Search
        </a>
        <ul class="nav nav-sidebar">
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup0">
        <span id="tgSpan0" class="fa fa-angle-right"></span>Welcome to Repose
      </a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../welcome/index.html">Welcome</a></li>
            <li><a class="" href="../welcome/troubleshooting.html">Troubleshooting</a></li>
            <li><a class="" href="../welcome/release-notes.html">Release Notes</a></li>
            <li><a class="" href="../welcome/ver-9-upgrade-notes.html">Version 9 Upgrade Notes</a></li>
            <li><a class="" href="../welcome/style-guide.html">Style Guide</a></li>
            <li><a class="" href="../welcome/faq.html">FAQ</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup1">
        <span id="tgSpan1" class="fa fa-angle-right"></span>Architecture
      </a>
      <ul id="topicGroup1" class="collapse  list-unstyled">
            <li><a class="" href="../architecture/index.html">Overview</a></li>
            <li><a class="" href="../architecture/configuration.html">Configuration</a></li>
            <li><a class="" href="../architecture/container.html">Container</a></li>
            <li><a class="" href="../architecture/filter-chain.html">Filter Chain</a></li>
            <li><a class="" href="../architecture/logging.html">Logging</a></li>
            <li><a class="" href="../architecture/packages.html">Packages</a></li>
            <li><a class="" href="../architecture/servlet-spec.html">Servlet Specification</a></li>
            <li><a class="" href="../architecture/system-model.html">System Model</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup2">
        <span id="tgSpan2" class="fa fa-angle-right"></span>Recipes
      </a>
      <ul id="topicGroup2" class="collapse  list-unstyled">
            <li><a class="" href="../recipes/index.html">Overview</a></li>
            <li><a class="" href="../recipes/quick-start.html">Quick Start</a></li>
            <li><a class="" href="../recipes/getting-started.html">Getting Started</a></li>
            <li><a class="" href="../recipes/custom-filter-for-repose.html">Custom Filter for Repose</a></li>
            <li><a class="" href="../recipes/docker.html">Docker</a></li>
            <li><a class="" href="../recipes/performance-best-practices.html">Performance Best Practices</a></li>
            <li><a class="" href="../recipes/role-based-access-control.html">Role Based Access Control</a></li>
            <li><a class="" href="../recipes/running-valve.html">Running Valve</a></li>
            <li><a class="" href="../recipes/valve-installation.html">Valve Installation</a></li>
            <li><a class="" href="../recipes/echo-server.html">Echo Server</a></li>
            <li><a class="" href="../recipes/rate-limiting.html">Rate Limiting</a></li>
            <li><a class="" href="../recipes/multi-tenant.html">Multi Tenant Authorization</a></li>
            <li><a class="" href="../recipes/user-access-events.html">User Access Events</a></li>
            <li><a class="" href="../recipes/basic-authentication.html">Basic Authentication</a></li>
            <li><a class="" href="../recipes/delegation.html">Delegation</a></li>
            <li><a class="" href="../recipes/preventing-xml-bomb.html">Preventing XML bomb attacks</a></li>
            <li><a class="" href="../recipes/api-event-flume.html">API Access Event Recording with Flume</a></li>
            <li><a class="" href="../recipes/xsd-versioning.html">XSD Versioning Guidelines</a></li>
            <li><a class="" href="../recipes/client-authentication.html">SSL/TLS Client Authentication</a></li>
            <li><a class="" href="../recipes/functional-test-framework.html">Functional Test Framework</a></li>
            <li><a class="" href="../recipes/header-splitting.html">Header Splitting</a></li>
            <li><a class="" href="../recipes/reason-phrase-normalization.html">Reason Phrase Normalization</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup3">
        <span id="tgSpan3" class="fa fa-angle-right"></span>Filters
      </a>
      <ul id="topicGroup3" class="collapse  list-unstyled">
            <li><a class="" href="../filters/index.html">Overview</a></li>
            <li><a class="" href="../filters/add-header.html">Add Header Filter</a></li>
            <li><a class="" href="../filters/api-validator.html">API Validator Filter</a></li>
            <li><a class="" href="../filters/body-extractor-to-header.html">Body Extractor to Header Filter</a></li>
            <li><a class="" href="../filters/body-patcher.html">Body Patcher Filter</a></li>
            <li><a class="" href="../filters/compression.html">Compression Filter</a></li>
            <li><a class="" href="../filters/content-type-stripper.html">Content Type Stripper Filter</a></li>
            <li><a class="" href="../filters/cors.html">CORS Filter</a></li>
            <li><a class="" href="../filters/derp.html">Delegation Response Processor (DeRP) Filter</a></li>
            <li><a class="" href="../filters/destination-router.html">Destination Router Filter</a></li>
            <li><a class="" href="../filters/echo.html">Echo Filter</a></li>
            <li><a class="" href="../filters/exception.html">Exception Filter</a></li>
            <li><a class="" href="../filters/forwarded-proto.html">Forwarded Protocol Filter</a></li>
            <li><a class="" href="../filters/header-normalization.html">Header Normalization filter</a></li>
            <li><a class="" href="../filters/header-translation.html">Header Translation Filter</a></li>
            <li><a class="" href="../filters/header-user.html">Header User Filter</a></li>
            <li><a class="" href="../filters/herp.html">Highly Efficient Record Processor (HERP) Filter</a></li>
            <li><a class="" href="../filters/ip-user.html">IP User Filter</a></li>
            <li><a class="" href="../filters/iri-validator.html">IRI Validator Filter</a></li>
            <li><a class="" href="../filters/keystone-v2.html">Keystone v2 Filter</a></li>
            <li><a class="" href="../filters/keystone-v2-authorization.html">Keystone v2 Authorization Filter</a></li>
            <li><a class="" href="../filters/keystone-v2-basic-auth.html">Keystone v2 Basic Auth Filter</a></li>
            <li><a class="" href="../filters/merge-header.html">Merge Header Filter</a></li>
            <li><a class="" href="../filters/openapi-validator.html">OpenAPI Validatort Filter</a></li>
            <li><a class="" href="../filters/openstack-identity-v3.html">Openstack Identity v3 Filter</a></li>
            <li><a class="" href="../filters/rate-limiting.html">Rate Limiting Filter</a></li>
            <li><a class="" href="../filters/regex-rbac.html">RegEx Role Based Access Control (RBAC) Filter</a></li>
            <li><a class="" href="../filters/scripting.html">Scripting Filter</a></li>
            <li><a class="" href="../filters/simple-rbac.html">Simple Role Based Access Control (RBAC) Filter</a></li>
            <li><a class="" href="../filters/slf4j-http-logging.html">SFL4J HTTP Logging Filter</a></li>
            <li><a class="" href="../filters/split-header.html">Split Header Filter</a></li>
            <li><a class="" href="../filters/tenant-culling.html">Tenant Culling Filter</a></li>
            <li><a class="" href="../filters/translation.html">Translation Filter</a></li>
            <li><a class="" href="../filters/uri-normalization.html">URI Normalization Filter</a></li>
            <li><a class="" href="../filters/uri-stripper.html">URI Stripper Filter</a></li>
            <li><a class="" href="../filters/uri-user.html">URI User Filter</a></li>
            <li><a class="" href="../filters/url-extractor-to-header.html">URL Extractor to Header Filter</a></li>
            <li><a class="" href="../filters/valkyrie-authorization.html">Valkyrie Authorization Filter</a></li>
            <li><a class="" href="../filters/versioning.html">Versioning Filter</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup4">
        <span id="tgSpan4" class="fa fa-angle-down"></span>Services
      </a>
      <ul id="topicGroup4" class="collapse in list-unstyled">
            <li><a class="" href="../services/index.html">Overview</a></li>
            <li><a class="" href="../services/atom-feed-consumption.html">Atom Feed Consumption Service</a></li>
            <li><a class="" href="../services/datastores.html">Datastores</a></li>
            <li><a class="" href="../services/health-check.html">Health Check Service</a></li>
            <li><a class="" href="../services/http-client.html">HTTP Client Service</a></li>
            <li><a class="" href="../services/http-logging.html">HTTP Logging Service</a></li>
            <li><a class="" href="../services/logging.html">Logging Service</a></li>
            <li><a class=" active" href="../services/metrics.html">Metrics Service</a></li>
            <li><a class="" href="../services/open-tracing.html">OpenTracing Service</a></li>
            <li><a class="" href="../services/phone-home.html">Phone Home Service</a></li>
            <li><a class="" href="../services/uri-redaction.html">URI Redaction service</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup5">
        <span id="tgSpan5" class="fa fa-angle-right"></span>Developer
      </a>
      <ul id="topicGroup5" class="collapse  list-unstyled">
            <li><a class="" href="../developer/index.html">Overview</a></li>
            <li><a class="" href="../developer/docker.html">Docker</a></li>
            <li><a class="" href="../developer/performance.html">Performance Testing</a></li>
            <li><a class="" href="../developer/functional.html">Functional Testing</a></li>
      </ul>
    </li>
</ul>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h2>Metrics Service</h2>
        </div>
        <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The Metrics Service enables the registration, collection, and reporting of metrics across <strong>Repose</strong>.</p>
</div>
<div class="paragraph">
<p>Metrics collected by this service provide insight into the state of <strong>Repose</strong> and its components at any given time.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="background"><a class="anchor" href="#background"></a>Background</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The goal of the Metrics Service is to provide a simple, convenient mechanism for gathering and reporting metrics.
To that end, the Metrics Service manages a centralized metrics registry and reporters for that registry.
By exposing the Metrics Service as a Java <code>@Named</code> component, other <strong>Repose</strong> components may easily leverage the ability to record metrics.</p>
</div>
<div class="paragraph">
<p>Implementation wise, the Metrics Service is a light-weight wrapper around the <a href="http://metrics.dropwizard.io/">Dropwizard metrics library</a>.
This allows the service to offer all of the capabilities of a powerful, open-source metrics library.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Default Configuration:</strong> metrics.cfg.xml</p>
</li>
<li>
<p><strong>Released:</strong> v2.7.0</p>
</li>
<li>
<p><a href="../schemas/metrics.xsd">Schema</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="full-configuration"><a class="anchor" href="#full-configuration"></a>Full Configuration</h3>
<div class="listingblock">
<div class="title">metrics.cfg.xml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;metrics</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://docs.openrepose.org/repose/metrics/v1.0</span><span style="color:#710">&quot;</span></span>
         <span style="color:#b48">enabled</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span style="color:#070;font-weight:bold">&lt;graphite&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
        <span style="color:#070;font-weight:bold">&lt;server</span> <span style="color:#b48">host</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">graphite.example.com</span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="3"></i><b>(3)</b>
                <span style="color:#b48">port</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">12345</span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="4"></i><b>(4)</b>
                <span style="color:#b48">period</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">10</span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="5"></i><b>(5)</b>
                <span style="color:#b48">prefix</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">repose.example</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span> <i class="conum" data-value="6"></i><b>(6)</b>
    <span style="color:#070;font-weight:bold">&lt;/graphite&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/metrics&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Enables the service.
If this attribute is set to <code>false</code>, then metrics will not be reported,<br>
Default: <code>true</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Holds the Graphite server definitions.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Declares that a Graphite server running on the <code>graphite.example.com</code> host should receive published metrics.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Declares the port that the Graphite server is listening on.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Defines the polling period, in seconds, of the Graphite reporter.
In this case, new metrics will be sent to the Graphite server every <code>10</code> seconds.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Defines the prefix which will be prepended to the names of any metrics being sent to the Graphite server.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="further-information"><a class="anchor" href="#further-information"></a>Further Information</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information about what the Metrics service can do, see the <a href="http://metrics.dropwizard.io/3.2.0/manual/index.html">Dropwizard Metrics User Manual</a>.</p>
</div>
<div class="sect2">
<h3 id="jmx-reporting"><a class="anchor" href="#jmx-reporting"></a>JMX Reporting</h3>
<div class="paragraph">
<p>All metrics reported to this service will be reported to JMX.</p>
</div>
<div class="paragraph">
<p>In order to report metrics to JMX, this service must translate metric names into <a href="https://docs.oracle.com/javase/8/docs/api/javax/management/ObjectName.html">JMX ObjectNames</a>.
A metric can be named virtually anything, but names often follow the <code>&lt;segment1&gt;.&lt;segment2&gt;.&lt;&#8230;&#8203;&gt;.&lt;segmentn&gt;</code> convention.
A simplified general form for an object name is <code>&lt;domain&gt;:&lt;key1&gt;=&lt;value1&gt;,&lt;key2&gt;=&lt;value2&gt;,&lt;&#8230;&#8203;&gt;,&lt;keyn&gt;=&lt;valuen&gt;</code>.
To go from metric name to object name, the translation process will start by prepending the metric name with the hostname of the host running <strong>Repose</strong>.
Next, it will split the metric name using <code>.</code> as a delimiter.
The index of each delimited segment will act as the key for that segment, and the value of the segment will act as the value.</p>
</div>
<div class="paragraph">
<p>For example, a metric named <code>org.openrepose.example.count</code> will be reported to JMX as <code>&lt;hostname&gt;:001="org",002="openrepose",003="example",004="count"</code>.</p>
</div>
<div class="paragraph">
<p>While this approach can cause some difficulty in querying metrics from JMX, it provides easier navigation of metrics when using a tool such as <a href="http://openjdk.java.net/tools/svc/jconsole/">JConsole</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="aggregating-metrics"><a class="anchor" href="#aggregating-metrics"></a>Aggregating Metrics</h3>
<div class="paragraph">
<p>This service supports the automatic aggregation of certain metrics.
In some cases, aggregating metrics provides useful insight into the system at a level where individual metrics may not be present.
For example, a <code>Meter</code> on its own might track the status codes sent in responses from a single filter.
However, we want to be able to view the status codes send in responses from all filters.
For that purpose, this service supplies a <code>SummingMeter</code>.
See <a href="#SummingMeter">[SummingMeter]</a> for more details.</p>
</div>
<div class="paragraph">
<p>The following nested sections provide details about the supported aggregation metrics.</p>
</div>
<div class="sect3">
<h4 id="summing-meter"><a class="anchor" href="#summing-meter"></a>Summing Meter</h4>
<div class="paragraph">
<p><code>MultiMeter</code> s can be used to mark multiple <code>Meter</code> s at the same time.
While this makes <code>MultiMeter</code> s generally useful, when used in conjunction with the <code>SummingMeterFactory</code>, they are used to track an additional <code>Meter</code> which serves as the sum of all <code>Meter</code> s created by the <code>SummingMeterFactory</code>.</p>
</div>
<div class="paragraph">
<p>A summing <code>Meter</code> should be constructed by utilizing the <code>SummingMeterFactory</code> accessible via this service.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">SummingMeterFactory summingMeterFactory =
    metricsService.createSummingMeterFactory(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">prefix</span><span style="color:#710">&quot;</span></span>);  <i class="conum" data-value="1"></i><b>(1)</b> <i class="conum" data-value="2"></i><b>(2)</b>

Meter meter =
    summingMeterFactory.createSummingMeter(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">summingMeter</span><span style="color:#710">&quot;</span></span>); <i class="conum" data-value="3"></i><b>(3)</b>

meter.mark(); <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Assume that the <code>MetricsService</code> has been injected.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Creates a <code>SummingMeterFactory</code> which will prefix the names of all <code>Meter</code> s it creates with <code>prefix</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Creates a <code>MultiMeter</code> registered with the name <code>prefix.summingMeter</code> which provides the same interactions as a standard <code>Meter</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Marks the <code>MultiMeter</code>.
When marked, <code>MultiMeter</code> s created in this way will mark themselves as well as an <code>ACROSS ALL</code> meter with the same prefix (e.g., <code>prefix.ACROSS ALL</code>).</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>SummingMeterFactory</code> also provides support for <code>Meter</code> trees.
These trees enable nesting of <code>Meter</code> s in more interesting ways.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">SummingMeterFactory parentSummingMeterFactory =
    metricsService.createSummingMeterFactory(MetricRegistry.name(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">prefix</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">parent</span><span style="color:#710">&quot;</span></span>));

SummingMeterFactory childSummingMeterFactory =
    parentSummingMeter.createChildFactory(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">child</span><span style="color:#710">&quot;</span></span>); <i class="conum" data-value="1"></i><b>(1)</b>

Meter meter =
    childSummingMeterFactory.createSummingMeter(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">summingMeter</span><span style="color:#710">&quot;</span></span>); <i class="conum" data-value="2"></i><b>(2)</b>

meter.mark(); <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Creates a <code>SummingMeterFactory</code> with a full prefix of <code>prefix.parent.child</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Creates a <code>Meter</code> with the name <code>prefix.parent.child.summingMeter</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Marks the <code>Meter</code> as well as both <code>ACROSS ALL</code> <code>Meter</code> s of the ancestral <code>SummingMeterFactory</code> s.
This means that all of the following <code>Metric</code> s are marked: <code>prefix.parent.child.summingMeter</code>, <code>prefix.parent.child.ACROSS ALL</code>, and <code>prefix.parent.ACROSS ALL</code>.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="metrics-directory"><a class="anchor" href="#metrics-directory"></a>Metrics Directory</h3>
<div class="paragraph">
<p>The following lists attempt to aggregate all of the metrics being reported to this service by various components.</p>
</div>
<div class="sect3">
<h4 id="filters"><a class="anchor" href="#filters"></a>Filters</h4>
<div class="ulist">
<ul>
<li>
<p><a href="../filters/api-validator.html#_metrics">API Validator Filter</a></p>
</li>
<li>
<p><a href="../filters/destination-router.html#_metrics">Destination Router Filter</a></p>
</li>
<li>
<p><a href="../filters/header-normalization.html#_metrics">Header Normalization Filter</a></p>
</li>
<li>
<p><a href="../filters/uri-normalization.html#_metrics">URI Normalization Filter</a></p>
</li>
<li>
<p><a href="../filters/versioning.html#_metrics">Versioning Filter</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="miscellaneous"><a class="anchor" href="#miscellaneous"></a>Miscellaneous</h4>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top">Metric Type</th>
<th class="tableblock halign-left valign-top">Metric Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repose Filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Meter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.openrepose.core.ResponseCode.Repose.&lt;response-code&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counts the number of responses with a <code>&lt;response-code&gt;</code> status code returned to the client.
<code>&lt;response-code&gt;</code> is the HTTP status code in the response before being sent to the client (i.e., after <strong>Repose</strong> processing has occurred).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repose Filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.openrepose.core.ResponseTime.Repose.&lt;response-code&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tracks the amount of time it takes for Repose including the origin service to complete its processing.
<code>&lt;response-code&gt;</code> is the HTTP status code in the response before being sent to the client (i.e., after <strong>Repose</strong> processing has occurred).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repose Filter Chain</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.openrepose.core.FilterProcessingTime.Delay.&lt;name&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tracks the amount of time it takes for a component named <code>&lt;name&gt;</code> to complete its processing.
<code>&lt;name&gt;</code> is either the name of a filter or <code>route</code>.
<code>route</code> indicates that the component being timed is the routing component, which includes forwarding a request to the origin service and waiting on a response.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repose Routing Servlet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Meter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.openrepose.core.RequestDestination.&lt;destinationId&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counts the number of requests to <code>&lt;destinationId&gt;</code>.
<code>&lt;destinationId&gt;</code> is the ID of the endpoint that the request was made to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repose Routing Servlet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Meter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.openrepose.core.ResponseCode.&lt;endpoint&gt;.&lt;response-code&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counts the number of responses with a <code>&lt;response-code&gt;</code> status code returned by <code>&lt;endpoint&gt;</code>.
<code>&lt;response-code&gt;</code> is the HTTP status code in the response from <code>&lt;endpoint&gt;</code>.
<code>&lt;endpoint&gt;</code> is the endpoint that the request was made to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repose Routing Servlet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.openrepose.core.ResponseTime.&lt;endpoint&gt;.&lt;response-code&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tracks the amount of time it takes for the origin service to complete its processing.
<code>&lt;response-code&gt;</code> is the HTTP status code in the response from <code>&lt;endpoint&gt;</code>.
<code>&lt;endpoint&gt;</code> is the endpoint that the request was made to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repose Routing Servlet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Meter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.openrepose.core.ResponseCode.All Endpoints.&lt;response-code&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counts the number of responses with a <code>&lt;response-code&gt;</code> status code returned by all endpoints.
This meter is the sum of all <code>org.openrepose.core.ResponseCode.&lt;endpoint&gt;.&lt;response-code&gt;</code> meters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repose Routing Servlet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.openrepose.core.ResponseTime.All Endpoints.&lt;response-code&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tracks the amount of time it takes for the origin service to complete its processing.
This timer is the sum of all <code>org.openrepose.core.ResponseTime.&lt;endpoint&gt;.&lt;response-code&gt;</code> meters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repose Routing Servlet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Meter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.openrepose.core.RequestTimeout.TimeoutToOrigin.&lt;endpoint&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counts the number of responses with a <code>408</code> status code returned by <code>&lt;endpoint&gt;</code>.
<code>&lt;endpoint&gt;</code> is the endpoint that the request was made to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repose Routing Servlet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Meter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.openrepose.core.RequestTimeout.TimeoutToOrigin.All Endpoints</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counts the number of responses with a <code>408</code> status code returned by all endpoints.
This meter is the sum of all <code>org.openrepose.core.RequestTimeout.TimeoutToOrigin.&lt;endpoint&gt;</code> meters.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script src="/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script src="/_javascripts/page-loader.js" type="text/javascript"></script>
  <script src="/_javascripts/include-html.js" type="text/javascript"></script>
  <script>includeHTML();</script>
  <script type="text/javascript">
    /*<![CDATA[*/
    $(document).ready(function() {
      $("[id^='topicGroup']").on('show.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicGroup']").on('hide.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicSubGroup']").on('show.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
      $("[id^='topicSubGroup']").on('hide.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
    });
    /*]]>*/
  </script>
</body>
</html>