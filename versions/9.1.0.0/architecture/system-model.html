<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>9.1.0.0 | Architecture | System Model</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="/_stylesheets/asciibinder.css" >
  <link rel="stylesheet" href="/_stylesheets/repose.css" >
  <link rel="stylesheet" href="/_stylesheets/release-note-categories.css" >

   <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
   <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
   <!--[if lt IE 9]>
     <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
     <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
   <![endif]-->

  <link href="/_images/favicon32x32.png" rel="shortcut icon" type="text/css">
  <!--[if IE]><link rel="shortcut icon" href="/favicon.ico"><![endif]-->
  <meta content="AsciiBinder" name="application-name">
</head>
<body onload="selectVersion('9.1.0.0');">
  <div class="container">
    <p class="toggle-nav visible-xs pull-left">
      <button class="btn btn-default btn-sm" type="button" data-toggle="offcanvas">Toggle nav</button>
    </p>
    <ol class="breadcrumb">
      <li class="sitename">
        <a class="navbar-brand" href="http://www.openrepose.org/">
          <img alt="OpenRepose" src="/_images/repose-logo.png" align="bottom">
        </a>
      </li>
      <li class="sitename">
        <a href="../../index.html">
          Home
        </a>
      </li>
      <li class="hidden-xs active">
        <a href="/versions/9.1.0.0/welcome/index.html">
          Repose
        </a>
        <select id="version-selector" onchange="versionSelector(this);" w3-include-html="/_includes/versions.html">
        </select>
      </li>
      <li class="hidden-xs active">
        <a href="../architecture/index.html">Architecture</a>
      </li>
      
      <li class="hidden-xs active">
        System Model
      </li>
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas">
        <a class="navbar-search" href="/versions/search.html">
          <span class="glyphicon glyphicon-search"/>
          Search
        </a>
        <ul class="nav nav-sidebar">
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup0">
        <span id="tgSpan0" class="fa fa-angle-right"></span>Welcome to Repose
      </a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../welcome/index.html">Welcome</a></li>
            <li><a class="" href="../welcome/troubleshooting.html">Troubleshooting</a></li>
            <li><a class="" href="../welcome/release-notes.html">Release Notes</a></li>
            <li><a class="" href="../welcome/ver-9-upgrade-notes.html">Version 9 Upgrade Notes</a></li>
            <li><a class="" href="../welcome/style-guide.html">Style Guide</a></li>
            <li><a class="" href="../welcome/faq.html">FAQ</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup1">
        <span id="tgSpan1" class="fa fa-angle-down"></span>Architecture
      </a>
      <ul id="topicGroup1" class="collapse in list-unstyled">
            <li><a class="" href="../architecture/index.html">Overview</a></li>
            <li><a class="" href="../architecture/configuration.html">Configuration</a></li>
            <li><a class="" href="../architecture/container.html">Container</a></li>
            <li><a class="" href="../architecture/filter-chain.html">Filter Chain</a></li>
            <li><a class="" href="../architecture/logging.html">Logging</a></li>
            <li><a class="" href="../architecture/packages.html">Packages</a></li>
            <li><a class="" href="../architecture/servlet-spec.html">Servlet Specification</a></li>
            <li><a class=" active" href="../architecture/system-model.html">System Model</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup2">
        <span id="tgSpan2" class="fa fa-angle-right"></span>Recipes
      </a>
      <ul id="topicGroup2" class="collapse  list-unstyled">
            <li><a class="" href="../recipes/index.html">Overview</a></li>
            <li><a class="" href="../recipes/quick-start.html">Quick Start</a></li>
            <li><a class="" href="../recipes/getting-started.html">Getting Started</a></li>
            <li><a class="" href="../recipes/custom-filter-for-repose.html">Custom Filter for Repose</a></li>
            <li><a class="" href="../recipes/docker.html">Docker</a></li>
            <li><a class="" href="../recipes/performance-best-practices.html">Performance Best Practices</a></li>
            <li><a class="" href="../recipes/role-based-access-control.html">Role Based Access Control</a></li>
            <li><a class="" href="../recipes/running-valve.html">Running Valve</a></li>
            <li><a class="" href="../recipes/valve-installation.html">Valve Installation</a></li>
            <li><a class="" href="../recipes/echo-server.html">Echo Server</a></li>
            <li><a class="" href="../recipes/rate-limiting.html">Rate Limiting</a></li>
            <li><a class="" href="../recipes/multi-tenant.html">Multi Tenant Authorization</a></li>
            <li><a class="" href="../recipes/user-access-events.html">User Access Events</a></li>
            <li><a class="" href="../recipes/basic-authentication.html">Basic Authentication</a></li>
            <li><a class="" href="../recipes/delegation.html">Delegation</a></li>
            <li><a class="" href="../recipes/preventing-xml-bomb.html">Preventing XML bomb attacks</a></li>
            <li><a class="" href="../recipes/api-event-flume.html">API Access Event Recording with Flume</a></li>
            <li><a class="" href="../recipes/xsd-versioning.html">XSD Versioning Guidelines</a></li>
            <li><a class="" href="../recipes/client-authentication.html">SSL/TLS Client Authentication</a></li>
            <li><a class="" href="../recipes/functional-test-framework.html">Functional Test Framework</a></li>
            <li><a class="" href="../recipes/header-splitting.html">Header Splitting</a></li>
            <li><a class="" href="../recipes/reason-phrase-normalization.html">Reason Phrase Normalization</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup3">
        <span id="tgSpan3" class="fa fa-angle-right"></span>Filters
      </a>
      <ul id="topicGroup3" class="collapse  list-unstyled">
            <li><a class="" href="../filters/index.html">Overview</a></li>
            <li><a class="" href="../filters/add-header.html">Add Header Filter</a></li>
            <li><a class="" href="../filters/api-validator.html">API Validator Filter</a></li>
            <li><a class="" href="../filters/body-extractor-to-header.html">Body Extractor to Header Filter</a></li>
            <li><a class="" href="../filters/body-patcher.html">Body Patcher Filter</a></li>
            <li><a class="" href="../filters/compression.html">Compression Filter</a></li>
            <li><a class="" href="../filters/content-type-stripper.html">Content Type Stripper Filter</a></li>
            <li><a class="" href="../filters/cors.html">CORS Filter</a></li>
            <li><a class="" href="../filters/derp.html">Delegation Response Processor (DeRP) Filter</a></li>
            <li><a class="" href="../filters/destination-router.html">Destination Router Filter</a></li>
            <li><a class="" href="../filters/echo.html">Echo Filter</a></li>
            <li><a class="" href="../filters/exception.html">Exception Filter</a></li>
            <li><a class="" href="../filters/forwarded-proto.html">Forwarded Protocol Filter</a></li>
            <li><a class="" href="../filters/header-normalization.html">Header Normalization filter</a></li>
            <li><a class="" href="../filters/header-translation.html">Header Translation Filter</a></li>
            <li><a class="" href="../filters/header-user.html">Header User Filter</a></li>
            <li><a class="" href="../filters/herp.html">Highly Efficient Record Processor (HERP) Filter</a></li>
            <li><a class="" href="../filters/ip-user.html">IP User Filter</a></li>
            <li><a class="" href="../filters/iri-validator.html">IRI Validator Filter</a></li>
            <li><a class="" href="../filters/keystone-v2.html">Keystone v2 Filter</a></li>
            <li><a class="" href="../filters/keystone-v2-authorization.html">Keystone v2 Authorization Filter</a></li>
            <li><a class="" href="../filters/keystone-v2-basic-auth.html">Keystone v2 Basic Auth Filter</a></li>
            <li><a class="" href="../filters/merge-header.html">Merge Header Filter</a></li>
            <li><a class="" href="../filters/openapi-validator.html">OpenAPI Validatort Filter</a></li>
            <li><a class="" href="../filters/openstack-identity-v3.html">Openstack Identity v3 Filter</a></li>
            <li><a class="" href="../filters/rate-limiting.html">Rate Limiting Filter</a></li>
            <li><a class="" href="../filters/regex-rbac.html">RegEx Role Based Access Control (RBAC) Filter</a></li>
            <li><a class="" href="../filters/scripting.html">Scripting Filter</a></li>
            <li><a class="" href="../filters/simple-rbac.html">Simple Role Based Access Control (RBAC) Filter</a></li>
            <li><a class="" href="../filters/slf4j-http-logging.html">SFL4J HTTP Logging Filter</a></li>
            <li><a class="" href="../filters/split-header.html">Split Header Filter</a></li>
            <li><a class="" href="../filters/tenant-culling.html">Tenant Culling Filter</a></li>
            <li><a class="" href="../filters/translation.html">Translation Filter</a></li>
            <li><a class="" href="../filters/uri-normalization.html">URI Normalization Filter</a></li>
            <li><a class="" href="../filters/uri-stripper.html">URI Stripper Filter</a></li>
            <li><a class="" href="../filters/uri-user.html">URI User Filter</a></li>
            <li><a class="" href="../filters/url-extractor-to-header.html">URL Extractor to Header Filter</a></li>
            <li><a class="" href="../filters/valkyrie-authorization.html">Valkyrie Authorization Filter</a></li>
            <li><a class="" href="../filters/versioning.html">Versioning Filter</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup4">
        <span id="tgSpan4" class="fa fa-angle-right"></span>Services
      </a>
      <ul id="topicGroup4" class="collapse  list-unstyled">
            <li><a class="" href="../services/index.html">Overview</a></li>
            <li><a class="" href="../services/atom-feed-consumption.html">Atom Feed Consumption Service</a></li>
            <li><a class="" href="../services/datastores.html">Datastores</a></li>
            <li><a class="" href="../services/health-check.html">Health Check Service</a></li>
            <li><a class="" href="../services/http-client.html">HTTP Client Service</a></li>
            <li><a class="" href="../services/http-logging.html">HTTP Logging Service</a></li>
            <li><a class="" href="../services/logging.html">Logging Service</a></li>
            <li><a class="" href="../services/metrics.html">Metrics Service</a></li>
            <li><a class="" href="../services/open-tracing.html">OpenTracing Service</a></li>
            <li><a class="" href="../services/phone-home.html">Phone Home Service</a></li>
            <li><a class="" href="../services/uri-redaction.html">URI Redaction service</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup5">
        <span id="tgSpan5" class="fa fa-angle-right"></span>Developer
      </a>
      <ul id="topicGroup5" class="collapse  list-unstyled">
            <li><a class="" href="../developer/index.html">Overview</a></li>
            <li><a class="" href="../developer/docker.html">Docker</a></li>
            <li><a class="" href="../developer/performance.html">Performance Testing</a></li>
            <li><a class="" href="../developer/functional.html">Functional Testing</a></li>
      </ul>
    </li>
</ul>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h2>System Model</h2>
        </div>
        <div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This version of the docs is a work in progress.
If you don&#8217;t see what you are looking for check the legacy <a href="http://wiki.openrepose.org">wiki</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <strong>Repose</strong> <code>system-model.cfg.xml</code> is the main configuration file for <strong>Repose</strong>.
It outlines the deployment layout and behavior for <strong>Repose</strong>.
<strong>Repose</strong> must be aware of this in order to configure itself and correctly coordinate routing if necessary.
Additionally, the system model lets <strong>Repose</strong> know where the other <strong>Repose</strong> nodes reside.
Using this information, <strong>Repose</strong> can coordinate its own clustering to share data among nodes that share common filters.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="model-definitions"><a class="anchor" href="#model-definitions"></a>Model Definitions</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Endpoint</dt>
<dd>
<p>An endpoint is a special type of destination.
An endpoint destination can specify an exact node to which requests can be routed.
This element can contain protocol, hostname, root-path, and port elements that are used in constructing a route.
If the endpoint is within the same container as <strong>Repose</strong>, protocol, hostname and port are not specified.</p>
</dd>
<dt class="hdlist1">Destinations</dt>
<dd>
<p>An enumeration of eligible routes to which HTTP messages can be forwarded.
These are listed in the destinations section of the system model.
If a destination is requested that is not listed in this section, a "service not available" code is returned.
The destination selected for routing is determined during processing (e.g., by the <a href="../filters/destination-router.html">Destination Router Filter</a>) with the default destination being used if no other destination was selected.</p>
</dd>
<dt class="hdlist1">Filter</dt>
<dd>
<p>An HTTP message interceptor that provides a specific piece of business functionality.
A filter contains a <strong>Repose</strong> specific named reference.</p>
</dd>
<dt class="hdlist1"><a href="filter-chain.html">Filters (Filter Chain)</a></dt>
<dd>
<p>A sequence of filters that will intercept and process the request and/ord response.
The request will be processed in order starting from the topmost filter in the sequence down to the bottom.
The response will be processed in order starting from the bottommost filter in the sequence up to the top.</p>
</dd>
<dt class="hdlist1">Node</dt>
<dd>
<p>A named reference that may be used to locate a network endpoint.
The hostname may be the human readable, string representation of an IPv4 or IPv6 address or a named reference that an IPv4 or IPv6 address.</p>
</dd>
<dt class="hdlist1">Service</dt>
<dd>
<p>A service is any served REST API bound to a TCP/IP address and port.
A service is considered served and available so long as it is addressable and accessible to a separate processes (local or remote).</p>
</dd>
<dt class="hdlist1">Services</dt>
<dd>
<p>A sequence of services that will be loaded into the servlet context to be available for filters.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section is only meant to explain certain quirks of the system model, and to provide a link to the comprehensive configuration schema.
Other aspects of configuration will be explained through examples. See: <a href="#repose-deployment-scenarios">Repose Deployment Scenarios</a></p>
</div>
<div class="paragraph">
<p>Since port numbers below 1024 are privileged, <strong>Repose</strong> typically can <strong>not</strong> connect directly to them.
There are several ways to go about getting around this, but one of the most generally accepted ways is to execute the following commands with root privilege (e.g., sudo):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/sbin/iptables -t nat -I PREROUTING -p tcp --dport  80 -j REDIRECT --to-port 8080
/sbin/iptables -t nat -I PREROUTING -p tcp --dport 443 -j REDIRECT --to-port 8443</pre>
</div>
</div>
<div class="sect2">
<h3 id="schema"><a class="anchor" href="#schema"></a><a href="../schemas/system-model.xsd">Schema</a></h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="repose-deployment-scenarios"><a class="anchor" href="#repose-deployment-scenarios"></a>Repose Deployment Scenarios</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="simple-pass-through-proxy"><a class="anchor" href="#simple-pass-through-proxy"></a>Simple Pass-Through Proxy</h3>
<div class="listingblock">
<div class="title">system-model.cfg.xml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;system-model</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://docs.openrepose.org/repose/system-model/v2.0</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;nodes&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;node</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">repose_node1</span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="1"></i><b>(1)</b>
          <span style="color:#b48">hostname</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">localhost</span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="2"></i><b>(2)</b>
          <span style="color:#b48">http-port</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">8080</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
  <span style="color:#070;font-weight:bold">&lt;/nodes&gt;</span>

  <span style="color:#070;font-weight:bold">&lt;filters</span><span style="color:#070;font-weight:bold">/&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>

  <span style="color:#070;font-weight:bold">&lt;services</span><span style="color:#070;font-weight:bold">/&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>

  <span style="color:#070;font-weight:bold">&lt;destinations&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;endpoint</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">open_repose</span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="6"></i><b>(6)</b>
              <span style="color:#b48">protocol</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http</span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="7"></i><b>(7)</b>
              <span style="color:#b48">hostname</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">openrepose.org</span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="8"></i><b>(8)</b>
              <span style="color:#b48">root-path</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/</span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="9"></i><b>(9)</b>
              <span style="color:#b48">port</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">80</span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="10"></i><b>(10)</b>
              <span style="color:#b48">default</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span> <i class="conum" data-value="11"></i><b>(11)</b>
  <span style="color:#070;font-weight:bold">&lt;/destinations&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/system-model&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines a new <strong>Repose</strong> node with an ID that must be unique across all defined nodes in the list.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defines the hostname of the <strong>Repose</strong> node.
If set to localhost, any physical node will match and run the <strong>Repose</strong> node.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Defines the port for the node to listen on.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Defines a sequence of filters to run.
In this case, no filters are being used.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Defines a set of services to run.
In this case, no services are being used.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Defines a new endpoint with an ID that must be unique across all defined endpoints in the destinations list.
There must be exactly one default destination endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Defines the endpoint&#8217;s protocol.
If the protocol is not specified, then internal dispatch is assumed.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Defines the endpoint&#8217;s host name.
If not specified, localhost is assumed.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>Defines the endpoint&#8217;s base path.
This will be used in building the URI/path for connecting to the service.
Any additional URI info will be appended to this.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>Defines the endpoint&#8217;s port.
If not specified (or 0), internal dispatch is assumed.</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>Specifies whether or not this is the default destination endpoint.
The default destination endpoint will be responsible for handling all traffic that is not explicitly routed to a different destination endpoint.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="filter-activation-determination"><a class="anchor" href="#filter-activation-determination"></a>Filter Activation Determination</h3>
<div class="listingblock">
<div class="title">system-model.cfg.xml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;system-model</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://docs.openrepose.org/repose/system-model/v2.0</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;nodes&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;node</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">repose_node</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">hostname</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">localhost</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">http-port</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">8080</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span style="color:#070;font-weight:bold">&lt;/nodes&gt;</span>

  <span style="color:#070;font-weight:bold">&lt;filters&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span style="color:#070;font-weight:bold">&lt;filter</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">ip-user</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
        <span style="color:#070;font-weight:bold">&lt;and&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
          <span style="color:#070;font-weight:bold">&lt;methods</span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">GET HEAD POST PUT</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
          <span style="color:#070;font-weight:bold">&lt;or&gt;</span> <i class="conum" data-value="6"></i><b>(6)</b>
            <span style="color:#070;font-weight:bold">&lt;header</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">foo</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span> <i class="conum" data-value="7"></i><b>(7)</b>
            <span style="color:#070;font-weight:bold">&lt;header</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bar</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">BaZ</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span> <i class="conum" data-value="8"></i><b>(8)</b>
          <span style="color:#070;font-weight:bold">&lt;/or&gt;</span>
          <span style="color:#070;font-weight:bold">&lt;not&gt;</span> <i class="conum" data-value="9"></i><b>(9)</b>
            <span style="color:#070;font-weight:bold">&lt;uri</span> <span style="color:#b48">regex</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">^/v1/[^/]+/[^/]+/public/?</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span> <i class="conum" data-value="10"></i><b>(10)</b>
          <span style="color:#070;font-weight:bold">&lt;/not&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/and&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/filter&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/filters&gt;</span>

  <span style="color:#070;font-weight:bold">&lt;services</span><span style="color:#070;font-weight:bold">/&gt;</span> <i class="conum" data-value="11"></i><b>(11)</b>

  <span style="color:#070;font-weight:bold">&lt;destinations&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;endpoint</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">origin_service</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">protocol</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">port</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">80</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">default</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span> <i class="conum" data-value="12"></i><b>(12)</b>
  <span style="color:#070;font-weight:bold">&lt;/destinations&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/system-model&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines a new <strong>Repose</strong> node.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defines a sequence of filters to run.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Defines the <a href="../filters/ip-user.html">IP User Filter</a> should be used.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Defines a boolean <code>AND</code> operator where all direct sub-elements must evaluate to <code>true</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Defines the space separated list of case sensitive methods to check the current request against.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Defines a boolean <code>OR</code> operator where at least one direct sub-element must evaluate to <code>true</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Defines that a header named <code>foo</code> (case insensitive) must be defined.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Defines that a header named <code>bar</code> (case insensitive) must be defined and have a value of <code>BaZ</code> (case sensitive).</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>Defines a boolean <code>NOT</code> operator that negates the result of the single direct sub-element&#8217;s evaluation.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>Defines the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#sum">Java regular expression</a> the URI must match.
This particular one requires that it has exactly four total path segments, the first path segment must be <code>v1</code>, the fourth path segment is <code>public</code>, and the trailing slash is optional.<br>
Example: <code>/v1/two/three/public</code></td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>Defines a set of services to run.
In this case, no services are being used.</td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td>Defines the required one default endpoint.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="streaming-request-body-to-the-origin-service"><a class="anchor" href="#streaming-request-body-to-the-origin-service"></a>Streaming Request Body to the Origin Service</h3>
<div class="paragraph">
<p>Streaming a request body to the origin service is accomplished by using the <code>chunked</code> transfer encoding.</p>
</div>
<div class="listingblock">
<div class="title">system-model.cfg.xml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;system-model</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://docs.openrepose.org/repose/system-model/v2.0</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;nodes&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;node</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">repose_node</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">hostname</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">localhost</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">http-port</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">8080</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/nodes&gt;</span>

  <span style="color:#070;font-weight:bold">&lt;filters</span><span style="color:#070;font-weight:bold">/&gt;</span>

  <span style="color:#070;font-weight:bold">&lt;destinations&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;endpoint</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">origin_service</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">default</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">protocol</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">port</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">80</span><span style="color:#710">&quot;</span></span>
              <span style="color:#b48">chunked-encoding</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">auto</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span style="color:#070;font-weight:bold">&lt;/destinations&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/system-model&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Determines whether or not the request body should be <code>chunked</code> when forwarded to the origin service.
If set to <code>true</code>, the request body will always be transferred <code>chunked</code> encoded.
If set to <code>false</code>, the request body will never be transferred <code>chunked</code> encoded.
If set to <code>auto</code>, the request body will only be transferred <code>chunked</code> encoded if the original request to <strong>Repose</strong> was transferred <code>chunked</code> encoded.<br>
Default: <code>true</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If the origin service does not support the <code>chunked</code> transfer-encoding (e.g., WSGI), it can be turned off easily.
Simply set the <code>chunked-encoding</code> attribute to <code>false</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Setting the <code>chunked-encoding</code> attribute to <code>false</code> may cause <strong>Repose</strong> to read and temporarily buffer the request body content.
This will cause some performance degradation as request body is no longer always streamed through.
It is recommended that users leave this value as <code>true</code> unless their service does not support chunked encoding.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="header-encoding"><a class="anchor" href="#header-encoding"></a>Header Encoding</h3>
<div class="paragraph">
<p>If headers got added to the request while processing through <strong>Repose</strong> that contain characters that are valid by the HTTP spec this allows them to be encoded before being sent to the origin service.</p>
</div>
<div class="listingblock">
<div class="title">system-model.cfg.xml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;system-model</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://docs.openrepose.org/repose/system-model/v2.0</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;nodes&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;node</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">repose_node</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">hostname</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">localhost</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">http-port</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">8080</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/nodes&gt;</span>

  <span style="color:#070;font-weight:bold">&lt;filters</span><span style="color:#070;font-weight:bold">/&gt;</span>

  <span style="color:#070;font-weight:bold">&lt;destinations</span> <span style="color:#b48">url-encode-headers</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">x-header-1,x-header-2</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span style="color:#070;font-weight:bold">&lt;endpoint</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">origin_service</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">default</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">protocol</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">port</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">80</span><span style="color:#710">&quot;</span></span>
              <span style="color:#b48">chunked-encoding</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">auto</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/destinations&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/system-model&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is a comma separated list of all the headers that should be URL Encoded.
Default: empty</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="nova-api-localhost-deployment"><a class="anchor" href="#nova-api-localhost-deployment"></a>Nova-API Localhost Deployment</h3>
<div class="paragraph">
<p><strong>IN PROGRESS</strong></p>
</div>
</div>
<div class="sect2">
<h3 id="health-check-passthrough"><a class="anchor" href="#health-check-passthrough"></a>Health Check Passthrough</h3>
<div class="paragraph">
<p><strong>IN PROGRESS</strong></p>
</div>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script src="/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script src="/_javascripts/page-loader.js" type="text/javascript"></script>
  <script src="/_javascripts/include-html.js" type="text/javascript"></script>
  <script>includeHTML();</script>
  <script type="text/javascript">
    /*<![CDATA[*/
    $(document).ready(function() {
      $("[id^='topicGroup']").on('show.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicGroup']").on('hide.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicSubGroup']").on('show.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
      $("[id^='topicSubGroup']").on('hide.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
    });
    /*]]>*/
  </script>
</body>
</html>